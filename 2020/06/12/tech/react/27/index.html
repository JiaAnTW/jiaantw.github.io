<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/favicon.png" />
    

    <title>
        
          tech/react/27 - Bunny&#39;s Tech
        
    </title>

    <!-- Spectre.css framework -->
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">

    <!-- theme css & js -->
    
<link rel="stylesheet" href="/css/book.css">

    
<script src="/js/book.js"></script>


    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
    
    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-129888855-4', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/zooming/2.1.1/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>

<meta name="generator" content="Hexo 4.2.1"></head>

<body>

<div class="book-container">
  <div class="book-sidebar">
    <div class="book-brand">
  <a href="/">
    <img src="/favicon.png">
    <span>BUNNY&#39;S TECH</span>
  </a>
</div>
    <div class="book-menu">
  <ul>
<li><a href="/">首頁</a></li>
<li><a href="/">關於我</a></li>
</ul>
<h1 id="WEB開發">WEB開發</h1>
<h2 id="React-js">React.js</h2>
<ul>
<li><a href="/2020/06/12/tech/react/01">環境設定</a></li>
<li><a href="/2020/06/12/tech/react/02">使用create-react-app</a></li>
<li><a href="/2020/06/12/tech/react/03">DOM和ES6</a></li>
<li><a href="/2020/06/12/tech/react/04">HelloWorld!</a></li>
<li><a href="/2020/06/12/tech/react/05">JSX (上)</a></li>
<li><a href="/2020/06/12/tech/react/06">JSX (下)</a></li>
<li><a href="/2020/06/12/tech/react/07">function component</a></li>
<li><a href="/2020/06/12/tech/react/08">props:綁定資料</a></li>
<li><a href="/2020/06/12/tech/react/09">props:綁定函式</a></li>
<li><a href="/2020/06/12/tech/react/10">props: children</a></li>
<li><a href="/2020/06/12/tech/react/11">class component</a></li>
<li><a href="/2020/06/12/tech/react/12">state與詳解setState語法</a></li>
<li><a href="/2020/06/12/tech/react/13">useState</a></li>
<li><a href="/2020/06/12/tech/react/14">React-Developer-Tools</a></li>
<li><a href="/2020/06/12/tech/react/15">Http request:Fetch Api</a></li>
<li><a href="/2020/06/12/tech/react/16">生命週期(1/4):Mount(上)</a></li>
<li><a href="/2020/06/12/tech/react/17">生命週期(2/4):Mount(下)</a></li>
<li><a href="/2020/06/12/tech/react/18">生命週期(3/4):Unmount</a></li>
<li><a href="/2020/06/12/tech/react/19">生命週期(4/4):Update</a></li>
<li><a href="/2020/06/12/tech/react/20">useEffect</a></li>
<li><a href="/2020/06/12/tech/react/21_1">各階層Component的溝通</a></li>
<li><a href="/2020/06/12/tech/react/21_2">useContext和useReducer</a></li>
<li><a href="/2020/06/12/tech/react/22">元件練習(上)</a></li>
<li><a href="/2020/06/12/tech/react/23">元件練習(下)</a></li>
<li><a href="/2020/06/12/tech/react/24">Custom hook</a></li>
<li><a href="/2020/06/12/tech/react/25">Custom hook練習</a></li>
<li><a href="/2020/06/12/tech/react/26">輸入元素與控制組件</a></li>
<li><a href="/2020/06/12/tech/react/27">react-router-dom (上)</a></li>
<li><a href="/2020/06/12/tech/react/28">react-router-dom (下)</a></li>
<li><a href="/2020/06/12/tech/react/29">圖片、css檔、問題集</a></li>
<li><a href="/2020/06/12/tech/react/30">學了React之後</a></li>
</ul>
<h1 id="產品開發">產品開發</h1>
<h2 id="有關前端技術的那些UX事">有關前端技術的那些UX事</h2>
<ul>
<li><a href="/2020/06/12/product/UX/maskMap">口罩地圖(GIS)</a></li>
</ul>

</div>


<script src="/js/book-menu.js"></script>

  </div>

  <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
function add_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.add('show')  
}

function remove_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.remove('show')
}

function sidebar_toggle() {
    let sidebar_toggle = document.querySelector('.sidebar-toggle')
    let sidebar = document.querySelector('.book-sidebar')
    let content = document.querySelector('.off-canvas-content')
    if (sidebar_toggle.classList.contains('extend')) { // show
        sidebar_toggle.classList.remove('extend')
        sidebar.classList.remove('hide')
        content.classList.remove('extend')
    }
    else { // hide
        sidebar_toggle.classList.add('extend')
        sidebar.classList.add('hide')
        content.classList.add('extend')
    }
}
</script>

  <div class="off-canvas-content">
    <div class="columns">
      <div class="column col-10 col-lg-12">
        <div class="book-navbar">
          <!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>

        </div>
        <div class="book-content">
          <div class="book-post">
  <h1 id="【React-js入門-27】-我要更多更多的分頁-react-router-dom-上">【React.js入門 - 27】 我要更多更多的分頁 - react-router-dom (上)</h1>
<h6 id="tags-第11屆鐵人賽">tags: <code>第11屆鐵人賽</code></h6>
<p>這裡的分頁，指的是透過不同的網址/url，導向不同的頁面。過去我們在設定一個新分頁時，通常是製作一個新的html檔，然後</p>
<ol>
<li>放在server的public_html底下，讓使用者根據檔案路徑去存取。</li>
<li>從後端程式碼去監聽不同url該response哪個靜態檔案</li>
</ol>
<p>這種方式，我們稱為後端路由。然而這樣的方式下，每次換網址時，就要重讀一個檔案，讓頁面整個重繪。但是大多數的時候，我們頁面會有固定的Layout，各個分頁間只有一部分是不一樣的，整個頁面都重新渲染會很浪費效能。</p>
<p>於是，喜歡用前端工程解決問題的工程師又跑出來，讓「前端路由」誕生了。</p>
<h2 id="認識名詞-SPA">認識名詞 - SPA</h2>
<p>前端路由的好處就是我們從頭到尾都只需要一個index.html，換路徑時只會更改頁面裡不一樣的地方。無論是對於使用者還是開發者而言，看起來不像是使用/開發多個頁面，而像是一個應用程式。這樣的網頁程式，我們就稱之為Single Page Application(SPA)。</p>
<p>在這邊我們會把焦點放在如何使用React中幫助實現前端路由的插件react-router-dom，有關前端路由的原理不會去探討，有興趣的可以參考<a href="https://blog.techbridge.cc/2017/09/16/frontend-backend-mvc/" target="_blank" rel="noopener">這篇</a>。</p>
<h2 id="準備-用來當分頁的元件">準備 - 用來當分頁的元件</h2>
<p>請先建立一個FirstPage.js和SecondPage.js，等等我們會用這兩個元件當作分頁。<br>
FirstPage.js</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">const</span> FirstPage=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> StyleSheet=&#123;</span><br><span class="line">        width:<span class="string">"100vw"</span>,</span><br><span class="line">        height:<span class="string">"100vh"</span>,</span><br><span class="line">        backgroundColor:<span class="string">"#FF2E63"</span>,</span><br><span class="line">        display: <span class="string">"flex"</span>,</span><br><span class="line">        alignItems:<span class="string">"center"</span>,</span><br><span class="line">        justifyContent:<span class="string">"center"</span>,</span><br><span class="line">        flexDirection:<span class="string">"column"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">        &lt;div style=&#123;StyleSheet&#125;&gt;</span><br><span class="line">            &lt;h1 style=&#123;&#123;<span class="attr">color</span>:<span class="string">"white"</span>,<span class="attr">fontFamily</span>:<span class="string">"Microsoft JhengHei"</span>&#125;&#125;&gt;我是第一頁&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> FirstPage;</span><br></pre></td></tr></table></figure>
<p>SecondPage.js</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;Link&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"><span class="keyword">const</span> SecondPage=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> StyleSheet=&#123;</span><br><span class="line">        width:<span class="string">"100vw"</span>,</span><br><span class="line">        height:<span class="string">"100vh"</span>,</span><br><span class="line">        backgroundColor:<span class="string">"#08D9D6"</span>,</span><br><span class="line">        display: <span class="string">"flex"</span>,</span><br><span class="line">        alignItems:<span class="string">"center"</span>,</span><br><span class="line">        justifyContent:<span class="string">"center"</span>,</span><br><span class="line">        flexDirection:<span class="string">"column"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">        &lt;div style=&#123;StyleSheet&#125;&gt;</span><br><span class="line">            &lt;nav&gt;</span><br><span class="line">                &lt;Link to=<span class="string">"/"</span>&gt;點我連到第一頁&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Link to="/</span>second<span class="string">" style=&#123;&#123;marginLeft:"</span><span class="number">20</span>px<span class="string">"&#125;&#125;&gt;點我連到第二頁&lt;/Link&gt;</span></span><br><span class="line"><span class="string">            &lt;/nav&gt; </span></span><br><span class="line"><span class="string">            &lt;h1 style=&#123;&#123;color:"</span>white<span class="string">",fontFamily:"</span>Microsoft JhengHei<span class="string">"&#125;&#125;&gt;我是第二頁&lt;/h1&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default SecondPage;</span></span><br></pre></td></tr></table></figure>
<h2 id="安裝react-router-dom">安裝react-router-dom</h2>
<p>打開terminal，輸入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i react-router-dom</span><br></pre></td></tr></table></figure>
<h2 id="HashRouter-v-s-BrowserRouter">HashRouter v.s BrowserRouter</h2>
<p>首先，請先在App.js的最上方加上</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; HashRouter &#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br></pre></td></tr></table></figure>
<p>在react-router-dom中，最常使用的是這兩種router介面:</p>
<ol>
<li>HashRouter: 頁面路徑最前面會有個「#」，換url時不會發送request。</li>
<li>BrowserRouter: 頁面路徑不會有井字，但換url時會發送request。</li>
</ol>
<p>使用BrowserRouter，server必須要有對應的response(最簡單的方法就是要請後端幫你設定好除了api以外的request都回傳你的index.html，<a href="https://dev.to/nburgess/creating-a-react-app-with-react-router-and-an-express-backend-33l3" target="_blank" rel="noopener">這是個範例</a>)。因為此系列我們沒有要講後端，所以我們這邊使用HashRouter。</p>
<p>接下來我們每個頁面都是在HashRouter底下，所以請先把App.js下方改為:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>( </span><br><span class="line">        &lt;HashRouter&gt;</span><br><span class="line"></span><br><span class="line">        &lt;<span class="regexp">/HashRouter&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="用Route設定第一個頁面">用Route設定第一個頁面</h2>
<blockquote>
<p>以Router(路由器)導向Route(路由)</p>
</blockquote>
<p>在react-router-dom中，我們也是要把route先放在router中，再於route設定頁面，才能讓router來導向對應位置的網頁。請在App.js剛剛import的地方多引入Route:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HashRouter,Route&#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br></pre></td></tr></table></figure>
<p>Route的基本使用方法為</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=<span class="string">"路徑"</span> component=&#123; 用來當頁面的元件 &#125; /&gt;</span><br></pre></td></tr></table></figure>
<p>所以現在我們先把剛剛做好的FirstPage.js引入</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> FirstPage <span class="keyword">from</span> <span class="string">"./FirstPage"</span>;</span><br></pre></td></tr></table></figure>
<p>然後要把route先放在router中，再於route設定頁面為FirstPage.js</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;HashRouter,Route&#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> FirstPage <span class="keyword">from</span> <span class="string">"./FirstPage"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>( </span><br><span class="line">        &lt;HashRouter&gt;</span><br><span class="line">            &lt;Route path=<span class="string">"/"</span> component=&#123;FirstPage&#125;/&gt;</span><br><span class="line">        &lt;<span class="regexp">/HashRouter&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/9z22urj.png" alt=""></p>
<h2 id="用-Switch-Route-設定第二個頁面">用 Switch + Route 設定第二個頁面</h2>
<p>現在我們來設定第二個頁面。請引入SecondPage.js</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SecondPage <span class="keyword">from</span> <span class="string">"./SecondPage"</span>;</span><br></pre></td></tr></table></figure>
<p>然後在router底下多加入一個設定SecondPage.js為頁面的route</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;HashRouter,Route&#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> FirstPage <span class="keyword">from</span> <span class="string">"./FirstPage"</span>;</span><br><span class="line"><span class="keyword">import</span> SecondPage <span class="keyword">from</span> <span class="string">"./SecondPage"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>( </span><br><span class="line">        &lt;HashRouter&gt;</span><br><span class="line">            &lt;Route path=<span class="string">"/"</span> component=&#123;FirstPage&#125;/&gt;</span><br><span class="line">            &lt;Route path=<span class="string">"/second"</span> component=&#123;SecondPage&#125;/&gt;</span><br><span class="line">        &lt;<span class="regexp">/HashRouter&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure>
<p>雖然這樣是可以運作的，但是一般會在所有的route外面包一個東西叫<code>Switch</code>，它可以幫助我們找到目前路徑所正確應該對應到的Route。<br>
請引入Switch:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;HashRouter,Route,Switch&#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br></pre></td></tr></table></figure>
<p>然後把它包在所有的Route外面:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;HashRouter,Route,Switch&#125; <span class="keyword">from</span> <span class="string">"react-router-dom"</span>;</span><br><span class="line"><span class="keyword">import</span> FirstPage <span class="keyword">from</span> <span class="string">"./FirstPage"</span>;</span><br><span class="line"><span class="keyword">import</span> SecondPage <span class="keyword">from</span> <span class="string">"./SecondPage"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>( </span><br><span class="line">        &lt;HashRouter&gt;</span><br><span class="line">            &lt;Switch&gt;</span><br><span class="line">                &lt;Route path=<span class="string">"/"</span> component=&#123;FirstPage&#125;/&gt;</span><br><span class="line">                &lt;Route path=<span class="string">"/second"</span> component=&#123;SecondPage&#125;/&gt;</span><br><span class="line">            &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>HashRouter&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>
<p>接著執行之後輸入不同的網址，你就會發現</p>
<blockquote>
<p>哇! 不管我輸 <a href="http://localhost:3000/#/" target="_blank" rel="noopener">http://localhost:3000/#/</a> 還是 <a href="http://localhost:3000/#/second" target="_blank" rel="noopener">http://localhost:3000/#/second</a> ，出現的都是firstPage耶</p>
</blockquote>
<p>這是因為Route只要偵測到目前的path「有包含你設定的字串」就會顯示該頁面，所以你在http://localhost:3000/#/second 的時候實際上是firstPage和SecondPage一起顯示。</p>
<p>不過這通常不是我們想要的狀況，請在firstPage的Route的path前面加上<code>exact</code>:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route exact path=<span class="string">"/"</span> component=&#123;FirstPage&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>這個關鍵字會讓Route必須偵測到目前路徑完全符合path中的字串時才會顯示該頁面。<br>
現在進入http://localhost:3000/#/second ，就會看到:<br>
<img src="https://i.imgur.com/9ubtTPG.png" alt=""></p>
<h2 id="設定url參數">設定url參數</h2>
<p>有的時候我們會希望使用者在網址列就要給參數。在route設定</p>
<ol>
<li>要求<strong>一定要輸入參數</strong>的方法是在path上寫<code>:名稱</code>，例如以下是要求使用者一定在網址列輸入id的方法，如果沒給id，就不會導向該頁面: <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=<span class="string">"/:id"</span> component=&#123;SecondPage&#125;/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><strong>不強迫輸入參數</strong>的方法是在path上寫<code>:名稱?</code>，例如以下是讓使用者可以在網址列輸入id的方法，如果沒給id，還是會導向該頁面: <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=<span class="string">"/:id?"</span> component=&#123;SecondPage&#125;/&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>而Route會和你要求相符的參數整理成一個叫match物件中的params屬性，並放在該頁面component的props中。也就是在SecondPage讀取id的方法為:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">props.match.params.id</span><br></pre></td></tr></table></figure>
<h2 id="match-location-history">match &amp; location &amp; history</h2>
<p>包括剛剛提的match在內，所有關於目前router的一切資訊，都會包成這三個物件，然後放在目前頁面的component內。location跟目前路徑、request者傳來的參數有關，history則是可以讓你呼叫裡面的函數來操作路由器。在以入門為主的這系列就不詳細說明了，可以自己摸索看看。</p>
<p>假設路徑為:<br>
<img src="https://i.imgur.com/WccImKm.png" alt=""></p>
<p>則SecondPage的props:<br>
<img src="https://i.imgur.com/COAM0eC.png" alt=""></p>
<h2 id="小結-react-router-v-s-react-router-dom">小結 - react router v.s react router dom</h2>
<p>如果稍微查一下，你會發現有的人會說產生分頁要用react-router、有的人會說要用react-router-dom，那這兩個有什麼差別呢?</p>
<p>其實react-router-dom就只是以react-router為基礎，再加上一些可以讓你藉由操作DOM來改變路由的功能。所以當我們安裝完react router dom，react-router就同時被包在裡面了。我們不需要再執行<code>npm i react-router</code>。</p>
<p>此篇是基礎用react-router-dom產生分頁的方法，下一篇會來講react-router-dom提供的一個元件Link的使用，以及常見架構配合react-router-dom的實踐方法。</p>

</div>


  <div class="book-comments">
    




  </div>



<script src="/js/book-post.js"></script>

        </div>
      </div>
      <div class="column col-2 hide-lg">
        <div class="book-post-info">
  
    <div class="book-post-meta">

  <div class="author">

    <!-- Author image -->
    <div class="author-img">
      
        <figure class="avatar avatar-lg">
          <img src="/images/profile.jpg" alt="...">
        </figure>
      
    </div>

    <!-- Author title -->
    <div class="author-title">
      <div>Andy Chang</div>
      <div>2020-06-12</div>
    </div>
  </div>

  

  <div class="divider"></div>
</div>
  

  <div class="book-tocbot">
</div>
<div class="book-tocbot-menu">
  <a class="book-toc-expand" onclick="expand_toc()">Expand all</a>
  <a onclick="go_top()">Back to top</a>
  <a onclick="go_bottom()">Go to bottom</a>
</div>


<script src="/js/book-toc.js"></script>

</div>
      </div>
    </div>
  </div>
  
  <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>

</body>
</html>


<script src="/js/book.js"></script>
